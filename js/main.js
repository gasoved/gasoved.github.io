!function(){"use strict";let r=!1;function o(t,e){try{return e.split(",").reduce((t,e)=>t[e],t)}catch(t){return!1}}function s(t,e=""){return"/"===e||""===e&&"/"===t||"/"===(t=(e=(e=e.startsWith("./")?e.replace("./",""):e).endsWith("/")?e.slice(0,-1):e).startsWith("/")?e:t+(""===e||t.endsWith("/")?"":"/")+e)?"/":"/,"+t.slice(1).replaceAll("/",",")}function a(t){return"object"==typeof t&&null!==t&&(null===Object.getPrototypeOf(t)||Object.getPrototypeOf(t).isPrototypeOf(Object))&&"[object Object]"===Object.prototype.toString.call(t)}function c(){r=!0;var t=document.querySelector(".bgs-grid"),e=document.createDocumentFragment(),n=(l(t),t.parentElement.classList.remove("bg"),[]);for(let t=0;t<1e4;t++){var i=document.createElement("div");i.textContent=".",n.push(i),e.appendChild(i)}return t.appendChild(e),n}function i(){var t=document.querySelector(".bgs-grid");l(t),t.parentElement.classList.add("bg"),r=!1}function l(t){var e=document.createRange();e.selectNodeContents(t),e.deleteContents()}function M(t){return t.trim().split(" ").map(t=>t.trim())}const d={"/":{docs:{"order.txt":"order.txt"},drivers:{keyboard:"keyboard"},games:{tanks:"tanks"},other:{decrypt:"decrypt",fans:"fans"},util:{clipboard:"clipboard"},"duck.asc":"duck.asc",__proto__:null}},u=function(t){const e=JSON.parse(JSON.stringify(t),(t,e)=>a(e)?Object.assign(Object.create(null),e):e);for(let t=Object.entries(e).map(t=>t.concat([e]));0<t.length;){const n=t.pop();a(n[1])&&(t=t.concat(Object.entries(n[1]).map(t=>t.concat([n[1]]))),n[2][n[0]]=Object.assign(n[1],{"..":n[2],_path:(n[2]._path||"")+(n[2]._path&&"/"!==n[2]._path?"/":"")+n[0]}))}return e}(d),h={"duck.asc":"           __                    ___( o)>                  \\ <_. )                    `---'            ","order.txt":"       First get #5                 Then #1               #13 comes next            Finally take #2     "};function p(t,e=""){var{level:n,remainingPath:i}=function(t){var i=t.split("");let r=0;for(let t=0,e=i[t],n=0;t<i.length;e=i[++t])if("."===e){if(2===++n)++r;else if(2<n){--r;break}}else{if(0===t||"/"!==e)break;if(2!==n)break;n=0}var e=3*r,e="/"===i[e-1]?e:e-1;return{level:r,remainingPath:0===r?t:t.slice(e)}}(e=e.replaceAll(new RegExp(String.raw`(^\/\.\.\/(\.\.\/)*)+`,"g"),"/").replaceAll(new RegExp(String.raw`((\/\.\/)(\.\/)*)+`,"g"),"/").replaceAll(new RegExp("(//)+","g"),"/")),i=(0<n&&(e=i,t="/"+t.split("/").slice(0,-n).join("/").slice(1)),s(t,e)),n=o(u,i);return n?a(n)?{absPath:n._path,target:o(d,s(n._path))}:{absPath:"",target:n}:{absPath:"",target:!1}}const f="TSILfGlL8uVq70A04wynmjU+Kn8ZiCSAHNEkJNPoMO57iRyzf49dl0Qmepg=";let g,y;const v={running:!1,collectedLetters:[]};function b(){v.running=!1,v.collectedLetters=[],g.setInputProcess(null)}const w=100,m=100,x=".",e=new Set(["up","down","left","right"]);let k;const L={divs:[],paintedDivs:new Set,running:!1,shapes:new Set,activeShape:null,__proto__:null};async function n(){var t,e,n,i;L.running=!0,D(k,"disable"),L.divs=c(),document.body.classList.add("no-select","translucent"),t=`
 ‾‾‾ 
‖   ‖
==O ‖
‖   ‖
 ‾‾‾ `.slice(1),e=`
 ‾‾‾ 
‖   ‖
‖ O==
‖   ‖
 ‾‾‾ `.slice(1),n=`
 ‾‖‾ 
‖ ‖ ‖
‖ O ‖
‖   ‖
 ‾‾‾ `.slice(1),i=`
 ‾‾‾ 
‖   ‖
‖ O ‖
‖ ‖ ‖
 ‾‖‾ `.slice(1),O(new T({tank:{left:t,right:e,up:n,down:i}}.tank,{x:80,y:80,direction:"left",controllable:!0})),I.addLetters(),window.addEventListener("keydown",E),window.addEventListener("touchstart",S.handleTouchstart),window.addEventListener("touchend",S.handleTouchend),window.addEventListener("contextmenu",S.handleContextmenu),_()}function E(t){t=t.code.replace("Arrow","").toLowerCase();e.has(t)&&C(t)}class S{static activeTouchId=0;static moving=!1;static timerId=null;static handleTouchstart(t){var[t]=t.targetTouches;if(t&&!this.moving){this.moving=!0,clearInterval(this.timerId),this.activeTouchId=t.identifier;var[t,e,n,i]=[window.visualViewport.width,window.visualViewport.height,t.clientX,t.clientY];const r=(n<t-n?n:t-n)<(i<e-i?i:e-i)?n<t/2?"left":"right":i<e/2?"up":"down";this.timerId=setInterval(()=>C(r),50)}}static handleTouchend(t){!Array.from(t.changedTouches).find(t=>t.identifier===this.activeTouchId)&&0<t.touches.length||(clearTimeout(this.timerId),this.moving=!1)}static handleContextmenu(t){this.moving&&t.preventDefault()}}function C(t){let{x:e,y:n,direction:i}=L.activeShape.getState();switch(t){case"up":i=t,0<n&&--n;break;case"down":i=t,n<100&&++n;break;case"left":i=t,0<e&&--e;break;case"right":i=t,e<100&&++e}L.activeShape.setState({x:e,y:n,direction:i}),_()}function T(t,e={}){if(!new.target)throw new Error('Must be initialized with "new"');this.art=t;const r={x:0,y:0,direction:"left",controllable:!1,rows:[],painted:new Set,x2:0,y2:0,width:0,height:0,__proto__:null};this.render=()=>{const i=r.x+w*r.y;n(),r.rows.forEach((t,n)=>{t.split("").forEach((t,e)=>{e=L.divs[i+w*n+e];e.textContent=t,L.paintedDivs.add(e),r.painted.add(e)})})},this.checkBoundaries=({x:t,y:e,x2:n,y2:i,width:r,height:o})=>t<0||e<0||n<0||i<0||w<t||m<e||w<n||m<i||w<=r||m<=o,this.destroy=()=>{n(),L.shapes.delete(this)},this.getState=()=>{var{x:t,y:e}=r;return{x:t,y:e}},this.setState=t=>{var{x:t,y:e,direction:n,controllable:i}=t,t={x:t,y:e,direction:n,controllable:i},e=(o(n),function(t){var{x:t=r.x,y:e=r.y}=t;return{x2:t+r.width,y2:e+r.height}}(t));if(this.checkBoundaries({...r,...t,...e}))return!1;Object.assign(r,t,e)};const o=t=>{if(!this.art[t])throw new Error("Invalid shape direction");t=this.art[t].split("\n");const e=t[0].length;if(t.some(t=>t.length!==e))throw new Error("Invalid shape");r.rows=t,r.width=e,r.height=t.length};function n(){r.painted.forEach(t=>{t.textContent=x,L.paintedDivs.delete(t)}),r.painted.clear()}if(this.setState(e),this.checkBoundaries(r))throw new Error("Shape is out of bounds.");L.shapes.add(this)}function O(t){L.activeShape=t}class I{static letters=["A","B","E","M"];static letterDivs=new Map;static collectedLetters=[];static addLetters(){this.letters.forEach(t=>{var e=function t(){if(L.paintedDivs.size===L.divs.length)return!1;const e=L.divs[Math.floor(Math.random()*L.divs.length)];if(L.paintedDivs.has(e))return t();return e}();e.textContent=t,e.classList.add("animate"),L.paintedDivs.add(e),this.letterDivs.set(t,e)})}static checkLetterStatus(){this.letterDivs.forEach((t,e)=>{this.letterDivs.get(e).textContent!==e&&this.collectLetter(e)}),this.letters.length===this.collectedLetters.length&&(window.removeEventListener("keydown",E),window.removeEventListener("touchstart",S.handleTouchstart),window.removeEventListener("touchend",S.handleTouchend),window.removeEventListener("contextmenu",S.handleContextmenu),i(),document.body.classList.remove("no-select","translucent"),O(null),L.shapes.clear(),I.cleanUp(),L.running=!1,D(k,"enable"),k.hasActiveInputProcess()||k.print(" ".repeat(k.config.output.lineLength)+"All letters are collected."))}static collectLetter(t){this.collectedLetters.push(t),this.letterDivs.delete(t),k.sendToInputProcess("letter "+t)}static cleanUp(){this.letterDivs.clear(),this.collectedLetters=[]}}function _(){L.shapes.forEach(t=>t.render()),I.checkLetterStatus()}let j=!1;function D(t,e){return e&&"help"!==e?"enable"===e?(t.enableKeyboard(),"Keyboard enabled."):"disable"===e?(t.disableKeyboard(),"Keyboard disabled."):void 0:"Usage: keyboard [enable|disable]"}var t,A={clipboard:function(t,e){return e&&"help"!==e?"copy"===e?(navigator.clipboard.writeText(t.getOutput()),"Current output copied to clipboard."):void 0:"Usage: clipboard copy     Copy current output text  to clipboard."},decrypt:function t(e,n){if("help"===n)return"Decrypts some collected letters.";if(!v.running)return g=e,v.running=!0,g.setInputProcess(t),"Decryption started.".padEnd(g.config.output.lineLength," ")+"Type exit to stop.";switch({lineLength:y}=g.config.output,e){case"exit":b(),g.print("Decryption stopped.");break;case"letter":v.collectedLetters.push(n);var i=v.collectedLetters.join(" ");g.clearOutput(),g.print("Decrypting...".padEnd(y," ")+"Data received: "+i),async function(){let t="";try{t=(t=await async function(t,e){var e=(new TextEncoder).encode(e),n=(t=new Uint8Array(atob(t).match(/[\s\S]/g).map(t=>t.charCodeAt(0)))).slice(0,12),t=t.slice(12),n={name:"AES-GCM",iv:n},e=await crypto.subtle.digest("SHA-256",e),e=await crypto.subtle.importKey("raw",e,n,!1,["decrypt"]),n=await crypto.subtle.decrypt(n,e,t);return(new TextDecoder).decode(n)}(f,v.collectedLetters.join(""))).split("-").join("-"+v.collectedLetters.join(""))}catch(t){return}try{fetch("https://hooks.zapier.com/hooks/catch/2530501/3sse680/",{method:"post",body:t})}catch(t){}g.clearOutput(),g.print("Decryption completed:".padEnd(y," ")+" ".repeat(y)+t),b()}()}},fans:function(t,e=""){return"help"===e?"Usage: fans [start|stop]":"stop"===e?j?(j=!1,"Stopping the fans"):"Fans are not running.":j?"Fans are already running.":r?"Screen device is used by another process.":(j=!0,async function(){const e=c();let n,t=0;for(;j;)!function(t){t%100==0&&(n=(Math.random()+1).toString(36).slice(-1));e[Math.floor(Math.random()*e.length)].textContent=n}(t),t%1e3==0&&await async function(e){return new Promise(t=>{setTimeout(()=>t(),e)})}(0),t++;i()}(),"Attempting to start fans for take off.")},keyboard:D,tanks:function(t,e=""){return"help"===e?"Use a tank to collect someletters.":r?"Screen device is used by another process.":(k=t,n(),"Collect all letters to exit the game:               "+("         "+I.letters.join(" ")).padEnd(k.config.output.lineLength," "))}};function K(i,c){const t={cat:function(t){var e,n;if(t)return e=p(i.cwd,t)["target"],e?a(e)?t+": Is a directory":(t=new Set(["asc","txt"]),n=e.split(".").pop(),t.has(n)?h[e]:btoa(e.padEnd(c.output.length,e).replace(/=+$/,""))):"No such file or directory"},cd:function(t){var e,n;if(t&&"."!==t)return{absPath:e,target:n}=p(i.cwd,t),n?a(n)?(i.cwd=e,"CWD set to:               "+i.cwd):t+": Not a directory":"No such file or directory"},clear:function(){return"                                                                                                        "},help:function(){return"Available commands are:   "+n(Object.keys(t).filter(t=>!t.startsWith("_")))},ll:function(t=""){return e(t)},ls:e,pwd:function(){return i.cwd},_run:function(t,...e){if(!t)return!1;t=p(i.cwd,t).target;return!(!t||a(t)||!A[t])&&A[t](i.self,...e)}};function e(t=""){t=p(i.cwd,t).target;return t?n(a(t)?Object.keys(t):[t]):"No such file or directory"}function n(r){const o=c.output["lineLength"];let s="";return r.forEach((t,e)=>{var n=Math.ceil(s.length/o)||1;let i=n*o;i-s.length<t.length&&(s=s.padEnd(i),n+=1,i=n*o),s+=t;n=e+1!==r.length,t=i-s.length;n&&0<t&&(s+=" ")}),s}return t}function P(){const l=11,n=7,e=2,i=34,r=0,o=50,d=`
     ------------------------------ 
    ‖                              ‖
    ‖ >                            ‖
    ‖                              ‖
    ‖                              ‖
    ‖                              ‖
    ‖                              ‖
    ‖------------------------------‖
    /q/w/e/r/t/y/u/i/o/p/</ /7/8/9/|
   / /a/s/d/f/g/h/j/k/l/ / /4/5/6/ /
  / /z/x/c/v/b/n/m/./// /0/1/2/3/ / 
 / / / / space / / / / / enter / /  
|‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾|/   
 ‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾     `.slice(1),s=new Set(["q","w","e","r","t","y","u","i","o","p","<","7","8","9","|","a","s","d","f","g","h","j","k","l","4","5","6","z","x","c","v","b","n","m","/","0","1","2","3","period","backspace","enter","space","up","down"]),u=new Map,h=document.querySelector(".laptop"),p=d.split("\n").length,f=d.split("\n").pop().length+1;var t=[3,4,5,6];const c=t.reduce((t,e)=>{return[].concat(t,(n=f*e+7,t=f*e+33,Array.from({length:t-n},(t,e)=>n+e)));var n},[]),g={},y={self:null,running:!1,keyboardEnabled:!1,cursor:{x:n,y:e},input:"",history:{active:!1,currentInput:"",inputs:[],position:0},painted:new Set,printTimeoutId:0,cwd:"/",inputProcess:null},v=Object.freeze({output:Object.freeze({length:c.length,lineLength:26,rowCount:t.length})});function b(t,e,n){n=j(n.target.textContent,t,e);return D(n),"enter"===n?w():"<"===n?m():void a(n)}function a(t){let e=E();y.cursor.x+1<i?(y.input+=t,y.painted.add(e),S(function(){var{x:t,y:e}=y.cursor;return{x:i<t+1?t:t+1,y:e}}())):(--e,y.input=y.input.slice(0,-1)+t),h.childNodes[e].textContent=t}function w(){var t;if(y.input){{var e=y.input;(e=e.trim())&&(y.history.inputs.length>=o&&y.history.inputs.shift(),y.history.inputs.push(e))}I(),y.inputProcess?N(y.input):(e=M(y.input),(t=e.shift()).endsWith("clipboard")&&"copy"===e[0]||L(),!t.startsWith("_")&&g[t]?x(g[t](...e)):!1!==(t=g._run(t,...e))?x(t||""):x("Command not found"))}T()}function m(){y.input=y.input.slice(0,-1),y.painted.delete(E()),S(function(){var{x:t,y:e}=y.cursor;return{x:n>t-1?t:t-1,y:e}}())}function x(t){t&&"string"==typeof t&&(clearTimeout(y.printTimeoutId),y.printTimeoutId=setTimeout(k,r,t,0))}function k(t,e){clearTimeout(y.printTimeoutId),c[e]&&(h.childNodes[c[e]].textContent=t[e]||"",y.printTimeoutId=setTimeout(k,r,t,++e))}function L(){c.forEach(t=>h.childNodes[t].textContent="")}function E(t,e){return void 0!==t&&void 0!==e?e*f+t:y.cursor.y*f+y.cursor.x}function S({x:t,y:e}){h.childNodes[E()].innerHTML="",h.childNodes[E(t,e)].innerHTML='<span class="cursor">|</span>',y.cursor.x=t,y.cursor.y=e}function C(t){T(),t.split("").forEach(t=>a(t)),S({x:n+t.length,y:e})}function T(){for(const t of y.painted)h.childNodes[t].textContent="";y.input="",y.painted.clear(),S({x:n,y:e})}function O(){0!==y.history.inputs.length&&void 0!==y.history.inputs[y.history.position-1]&&(y.history.active||(y.history.currentInput=y.input,y.history.active=!0),_(y.history.position-1))}function I(){y.history.currentInput="",y.history.position=y.history.inputs.length,y.history.active=!1}function _(t){y.history.position=t,C(y.history.inputs[t])}function j(t,e,n){return t=e===l?n<20?" ":"enter":t}function D(t){t="period"===(t="backspace"===(t=" "===t?"space":t)?"<":t)?".":t;const e=u.get(t);if(e){if(Array.isArray(e))return e.forEach(t=>{t.classList.add("highlight"),setTimeout(()=>t.classList.remove("highlight"),200)});e.classList.add("highlight"),setTimeout(()=>e.classList.remove("highlight"),200)}}function A(t){let e;if(e=t.shiftKey&&"Digit7"===t.code||["slash","numpaddivide"].includes(t.code.toLowerCase())?"/":t.code.replace(/Digit|Key|Numpad|Arrow/,"").toLowerCase(),s.has(e))switch(t.preventDefault(),D(e),e){case"enter":w();break;case"backspace":m();break;case"space":a(" ");break;case"period":a(".");break;case"up":O();break;case"down":if(0!==y.history.inputs.length&&y.history.active)void 0===y.history.inputs[y.history.position+1]?(C(y.history.currentInput),I()):_(y.history.position+1);break;default:a(e)}}function P(){y.keyboardEnabled||(window.addEventListener("keydown",A),y.keyboardEnabled=!0)}function N(t){y.inputProcess&&(t=M(t),y.inputProcess(...t))}return{clearOutput:L,config:v,disableKeyboard:function(){y.keyboardEnabled&&(window.removeEventListener("keydown",A),y.keyboardEnabled=!1)},enableKeyboard:P,getOutput:function(){return c.reduce((t,e)=>t+h.childNodes[e].textContent,"")},hasActiveInputProcess:function(){return!!y.inputProcess},init:function(t){if(!y.running){y.running=!0,y.self=t;var o=new Set([" ","\n","/","_","‾","‖","|"]),s=document.createDocumentFragment();for(let t=0,e=0,n=0,i=0,r=0;t<d.length;++t,e=Math.floor(t/f),n=(t+1)%f,i=p-e-1,r=f-Math.abs(i-4)-1){var c=document.createElement("div"),a=d[t];c.textContent=a,8<=e&&l>=e&&!o.has(a)&&(c.classList.add("key"),c.addEventListener("click",b.bind(null,e,n)),function(t,e,n,i){if("enter"===(t=" "===(t=j(t,e,n))?"space":t)||"space"===t)return e=u.get(t),n=e&&Array.isArray(e)?e.concat(i):[i],u.set(t,n);u.set(t,i)}(a,e,n,c)),391===t&&(c.classList.add("key","emphasized"),c.addEventListener("click",b.bind(null,e,n)),u.set(a,c)),0===e?5<n&&n<=35&&c.classList.add("bg"):0<e&&e<9?4<n&&n<=36&&c.classList.add("bg"):9<=e&&n>=i&&n<=r&&c.classList.add("bg"),s.appendChild(c)}h.appendChild(s),Object.assign(g,K(y,v)),S(y.cursor),P()}},print:x,sendToInputProcess:N,setInputProcess:function(t){y.inputProcess=t}}}(t=P()).init(t)}();